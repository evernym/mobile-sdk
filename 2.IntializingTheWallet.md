# 2. Initializing the Wallet

Almost all of the iOS APIs provided by the ConnectMe iOS SDK are asynchronous. This means that a completion callback function is required to get the results of the function invocations. Here are the steps to initialize the wallet. Most of these wallet initialization steps are done in the AppDelegate’s didFinishLaunchingWithOptions lifecycle method.

![](https://github.com/evernym/mobile-starter/blob/master/wiki-images/InitializingWalletConnectMe.png)

> ios: refer to  mobile-starter-master/ios/CMeSdkObjc/CMeSdkObjc/AppDelegate.m

> android: refer to  init() in mobile-starter-master/android/CMeSdkJava/app/src/main/java/me/connect/sdk/java/ConnectMeVcx.java

1. initialize the VcxLogger to use the default logger or to use a custom logger.
2. Save the pool transactions genesis configuration JSON to a file. The contents of the *poolTxnGenesis NSString variable will be very similar to the contents here: https://raw.githubusercontent.com/sovrin-foundation/sovrin/stable/sovrin/pool_transactions_sandbox_genesis. The path to the pool transactions genesis file is used in the function call to initialize the SDK.
3. Invoke the payment initialization function (for now this is nullPay). Notice that this call is not asynchronous.
4. Invoke the agentProvisionAsync function to get the oneTimeInfo configuration
5. Get the vcxConfig JSON from the keychain keystore if the oneTimeInfo JSON is nil but if the oneTimeInfo JSON is not nil then create the vcxConfig JSON using the oneTimeInfo JSON.
6. Finally, we can initialize the VCX native library so that we can now use the SDK APIs that give us access to the wallet. Please notice that we are using the [NSUserDefaults standardUserDefaults]; as the temporary storage mechanism in this Objective C code but you should use a more robust storage and retrieval mechanism.
7. Now you should make sure that your mobile app still builds and links and deploys onto a real mobile device and run some tests to ensure everything works up to this point. Please let us know if the initializing of the wallet does not work after you have followed these steps. If you had to do extra steps to get it working then please also let us know what you had to do so that we can update this document.


## Selecting the Ledger and Agency

#### Ledger

If you want to use a different ledger then you MUST change to the corresponding Agency as described in The Agency section below and you need to change the contents of the poolTxnGenesis variable in the above code. Evernym does have several different active ledger instances that we use for different scenarios: development, sandbox, staging, demo, qatest1, qatest2, devrc, qarc, devteam1, devteam2, devteam2, and prod. An older configuration for some of these ledgers can be seen <a href="https://github.com/sovrin-foundation/connector-app/blob/master/app/store/config-store.js">here</a> and you can search for the word ‘server_environment.’ to see some of these and then use the ‘poolConfig:’ setting in the particular environment to set the poolTxnGenesis variable to the value of the ‘poolConfig:’ setting. If you really want to use a different ledger other than Demo, which is what the above code uses, then please let us know.

#### Agency
If you choose to use a different Ledger then you MUST change to the corresponding Agency and vice versa. To use a different Agency you need to change the contents of the agencyConfig variable in the above code. For every different ledger configuration there is a corresponding agency configuration. These configuration settings can be seen in the same config-store.js code that was linked to in the Ledger section above. You will need to change the agency_did, agency_url, and agency_verkey in the code above in order to use a different agency for the corresponding ledger.

> TODO: NOTE about had issues were here where NSString *walletName = @"wallet_name"; had to be changed and NSString *fileName = @"pool_transactions_genesis_DEMO";
