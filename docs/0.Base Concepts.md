# Base Concepts

## Overview

### Connections

Connection is a connection between ... and ... . Simply, during connection both parts exchange their public keys that will be used for messages encryption during later communtications.

### Messages

Messages are the main way to exchange data within connection.

### Credentials

Credential is a set of information provided by issuer, representing digital credentials to prove yourself.

### Proof requests

Proof request is request for revealing an information asked by other side.

### Proofs

Proof is information provided by credentials.

### Questions

Question is the request to provided one of the predefined answers from specified question.

## SDK overview

### Persistence

Inside SDK library, all entities (connections, proofs, etc.) presented as state machines. Every mutating operation, e.g. accepting or rejecting, changes internal state of this state machine.

Mobile device is known by it's limited resources and aggresive memory freeing in case of low RAM or application suspending. Because of this, entity state machines should be persisted to avoid data loss.

SDK allows this entities to be **serialized** into string representation which could be easily persisted.\ 
String representations could be **deserialized** by SDK to entity state machine and perform various operations with it. Deserialization process returns **handle** integer value.

Most of the operations with entities has following flow (in example of credential offer):

* Deserialize credential string and receive credential handle.
* Using credential handle perform necessary operation (e.g. accept). 
* Serialize new credential state using credential handle.
* Save resulting string for future use.

### Message receding 

SDK allows two types of message receiving:

##### Polling

With polling every message and state changes should be performed manually.

##### Push notifications.

SDK could be configured to use notification services to receive new messsages. In this case messages and updates will be sent in real time .
Push notification will contain following attributes in  message  body:
- `@type`: type for push notification message. It can be: `cred`, `credOffer`, `proofReq` and `Question`. For structured messages, type of the push notification will be `Question`.
- `@uid`: identifier for specific message we are receiving
- `@forDID`: identifier for connection fom which notification was sent. It matches to connection `pwDid`.

When push notification message is received, we will need to call **downloadMessages** in VCX library, with providing uid and forDid details from notification body.  

> **NOTE**: Current Android sample app provides only polling code samples.

##### Message status

After downloading and processing messages from the Agency, their status on the Agent must be manually changed as read.