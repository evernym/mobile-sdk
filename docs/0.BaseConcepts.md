# Base Concepts

## Overview

### Connections

Connection is a connection between ... and ... . Simply, during connection both parts exchange their public keys that will be used for messages encryption during later communications (so parties have private secure communication channel).

### Messages

Messages are the main way to exchange data within connection.

### Credentials

Credential is a set of digitally signed information provided by an Issuer, representing digital credentials to prove yourself.

### Proof requests

Proof request is request for revealing an information from a credential asked by other side.

### Proofs

Proof is digital evidence of information presented in Holder credentials.

### Questions

Question is the request to provided one of the predefined answers from specified question.

## SDK overview

### General

Inside SDK library, all entities (connections, proofs, etc.) represented as state machines.
Every mutating operation, e.g. accepting or rejecting, changes internal state of this state machine moving in into the next state.
MSDK contains four main kinds of state machines implementing different protocols:

* `Connection` - is used for establishing a communication channel between two parties.
* `Credential` - is used for obtaining verifiable credentials on the holder side.
* `DiscloasedProof` - is used for providing information about the credential holders.
* `Proof` - is used for requesting information about the credential holders.

### Message receiving 

In order to receive messages from other parties SDK uses Cloud Agent. 
There are two ways of message receiving from the Cloud Agent:

##### Polling

Once in a while, an application calls SDK function to get all unprocessed messages from the Cloud Agent.

##### Push notifications.

Cloud Agent is able to forward received messages to an endpoint (Push Notification service) which can be set using SDK.
In this case messages and updates will be sent in real time.
Message forwarding from the Cloud Agent will contain following attributes in message body:
- `@type`: type for push notification message. It can be: `cred`, `credOffer`, `proofReq` and `Question`. For structured messages, type of the push notification will be `Question`.
- `@uid`: identifier for specific message we are receiving
- `@forDID`: identifier for connection fom which notification was sent. It matches to connection `pwDid`.

After receiving a message from the Cloud Agent, Push Notification service should send a notification to the registered application.
Due to size limitations, push notification doesn't contain received messages by itself.
So when a push notification message is received by an application, it needs to call SDK function to download the message from the Cloud Agent with providing uid and forDid details from the notification body.

> **NOTE**: Current samples app provides only polling code samples.

##### Message status

After downloading and processing messages from the Cloud Agent, their status on the Agent must be manually changed as read by calling corresponding SDK function.
